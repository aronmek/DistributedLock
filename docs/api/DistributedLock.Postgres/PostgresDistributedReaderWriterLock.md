#### [DistributedLock.Postgres](README.md 'README')
### [Medallion.Threading.Postgres](Medallion.Threading.Postgres.md 'Medallion.Threading.Postgres')

## PostgresDistributedReaderWriterLock Class

Implements a distributed lock using Postgres advisory locks  
(see https://www.postgresql.org/docs/12/functions-admin.html#FUNCTIONS-ADVISORY-LOCKS)

```csharp
public sealed class PostgresDistributedReaderWriterLock :
Medallion.Threading.IDistributedReaderWriterLock
```

Inheritance [System.Object](https://docs.microsoft.com/en-us/dotnet/api/System.Object 'System.Object') &#129106; PostgresDistributedReaderWriterLock

Implements [IDistributedReaderWriterLock](https://github.com/madelson/DistributedLock/tree/default-documentation/docs/api/DistributedLock.Core/IDistributedReaderWriterLock.md 'Medallion.Threading.IDistributedReaderWriterLock')

| Constructors | |
| :--- | :--- |
| [PostgresDistributedReaderWriterLock(PostgresAdvisoryLockKey, string, Action&lt;PostgresConnectionOptionsBuilder&gt;)](PostgresDistributedReaderWriterLock..ctor.Gk53rLHLcZCRtaFskSoaPw.md 'Medallion.Threading.Postgres.PostgresDistributedReaderWriterLock.PostgresDistributedReaderWriterLock(Medallion.Threading.Postgres.PostgresAdvisoryLockKey, string, System.Action<Medallion.Threading.Postgres.PostgresConnectionOptionsBuilder>)') | Constructs a lock with the given [key](PostgresDistributedReaderWriterLock..ctor.Gk53rLHLcZCRtaFskSoaPw.md#Medallion.Threading.Postgres.PostgresDistributedReaderWriterLock.PostgresDistributedReaderWriterLock(Medallion.Threading.Postgres.PostgresAdvisoryLockKey,string,System.Action_Medallion.Threading.Postgres.PostgresConnectionOptionsBuilder_).key 'Medallion.Threading.Postgres.PostgresDistributedReaderWriterLock.PostgresDistributedReaderWriterLock(Medallion.Threading.Postgres.PostgresAdvisoryLockKey, string, System.Action<Medallion.Threading.Postgres.PostgresConnectionOptionsBuilder>).key') (effectively the lock name), [connectionString](PostgresDistributedReaderWriterLock..ctor.Gk53rLHLcZCRtaFskSoaPw.md#Medallion.Threading.Postgres.PostgresDistributedReaderWriterLock.PostgresDistributedReaderWriterLock(Medallion.Threading.Postgres.PostgresAdvisoryLockKey,string,System.Action_Medallion.Threading.Postgres.PostgresConnectionOptionsBuilder_).connectionString 'Medallion.Threading.Postgres.PostgresDistributedReaderWriterLock.PostgresDistributedReaderWriterLock(Medallion.Threading.Postgres.PostgresAdvisoryLockKey, string, System.Action<Medallion.Threading.Postgres.PostgresConnectionOptionsBuilder>).connectionString'),<br/>and [options](PostgresDistributedReaderWriterLock..ctor.Gk53rLHLcZCRtaFskSoaPw.md#Medallion.Threading.Postgres.PostgresDistributedReaderWriterLock.PostgresDistributedReaderWriterLock(Medallion.Threading.Postgres.PostgresAdvisoryLockKey,string,System.Action_Medallion.Threading.Postgres.PostgresConnectionOptionsBuilder_).options 'Medallion.Threading.Postgres.PostgresDistributedReaderWriterLock.PostgresDistributedReaderWriterLock(Medallion.Threading.Postgres.PostgresAdvisoryLockKey, string, System.Action<Medallion.Threading.Postgres.PostgresConnectionOptionsBuilder>).options') |
| [PostgresDistributedReaderWriterLock(PostgresAdvisoryLockKey, IDbConnection)](PostgresDistributedReaderWriterLock..ctor.W6WkSdoxDDf2G56xXhWE6A.md 'Medallion.Threading.Postgres.PostgresDistributedReaderWriterLock.PostgresDistributedReaderWriterLock(Medallion.Threading.Postgres.PostgresAdvisoryLockKey, System.Data.IDbConnection)') | Constructs a lock with the given [key](PostgresDistributedReaderWriterLock..ctor.W6WkSdoxDDf2G56xXhWE6A.md#Medallion.Threading.Postgres.PostgresDistributedReaderWriterLock.PostgresDistributedReaderWriterLock(Medallion.Threading.Postgres.PostgresAdvisoryLockKey,System.Data.IDbConnection).key 'Medallion.Threading.Postgres.PostgresDistributedReaderWriterLock.PostgresDistributedReaderWriterLock(Medallion.Threading.Postgres.PostgresAdvisoryLockKey, System.Data.IDbConnection).key') (effectively the lock name) and [connection](PostgresDistributedReaderWriterLock..ctor.W6WkSdoxDDf2G56xXhWE6A.md#Medallion.Threading.Postgres.PostgresDistributedReaderWriterLock.PostgresDistributedReaderWriterLock(Medallion.Threading.Postgres.PostgresAdvisoryLockKey,System.Data.IDbConnection).connection 'Medallion.Threading.Postgres.PostgresDistributedReaderWriterLock.PostgresDistributedReaderWriterLock(Medallion.Threading.Postgres.PostgresAdvisoryLockKey, System.Data.IDbConnection).connection'). |

| Properties | |
| :--- | :--- |
| [Key](PostgresDistributedReaderWriterLock.Key.md 'Medallion.Threading.Postgres.PostgresDistributedReaderWriterLock.Key') | The [PostgresAdvisoryLockKey](PostgresAdvisoryLockKey.md 'Medallion.Threading.Postgres.PostgresAdvisoryLockKey') that uniquely identifies the lock on the database |

| Methods | |
| :--- | :--- |
| [AcquireReadLock(Nullable&lt;TimeSpan&gt;, CancellationToken)](PostgresDistributedReaderWriterLock.AcquireReadLock.F28FR+b8mvglU+XBswMyuw.md 'Medallion.Threading.Postgres.PostgresDistributedReaderWriterLock.AcquireReadLock(System.Nullable<System.TimeSpan>, System.Threading.CancellationToken)') | Acquires a READ lock synchronously, failing with [System.TimeoutException](https://docs.microsoft.com/en-us/dotnet/api/System.TimeoutException 'System.TimeoutException') if the attempt times out. Multiple readers are allowed. Not compatible with a WRITE lock. Usage: |
| [AcquireReadLockAsync(Nullable&lt;TimeSpan&gt;, CancellationToken)](PostgresDistributedReaderWriterLock.AcquireReadLockAsync.TMCUkzQtH1Cc5G6akBfClw.md 'Medallion.Threading.Postgres.PostgresDistributedReaderWriterLock.AcquireReadLockAsync(System.Nullable<System.TimeSpan>, System.Threading.CancellationToken)') | Acquires a READ lock asynchronously, failing with [System.TimeoutException](https://docs.microsoft.com/en-us/dotnet/api/System.TimeoutException 'System.TimeoutException') if the attempt times out. Multiple readers are allowed. Not compatible with a WRITE lock. Usage: |
| [AcquireWriteLock(Nullable&lt;TimeSpan&gt;, CancellationToken)](PostgresDistributedReaderWriterLock.AcquireWriteLock.FExQhZC0WBEj7urzZq2J3g.md 'Medallion.Threading.Postgres.PostgresDistributedReaderWriterLock.AcquireWriteLock(System.Nullable<System.TimeSpan>, System.Threading.CancellationToken)') | Acquires a WRITE lock synchronously, failing with [System.TimeoutException](https://docs.microsoft.com/en-us/dotnet/api/System.TimeoutException 'System.TimeoutException') if the attempt times out. Not compatible with another WRITE lock or an UPGRADE lock. Usage: |
| [AcquireWriteLockAsync(Nullable&lt;TimeSpan&gt;, CancellationToken)](PostgresDistributedReaderWriterLock.AcquireWriteLockAsync.idZYzSuwm8J87ACMr/oI1g.md 'Medallion.Threading.Postgres.PostgresDistributedReaderWriterLock.AcquireWriteLockAsync(System.Nullable<System.TimeSpan>, System.Threading.CancellationToken)') | Acquires a WRITE lock asynchronously, failing with [System.TimeoutException](https://docs.microsoft.com/en-us/dotnet/api/System.TimeoutException 'System.TimeoutException') if the attempt times out. Not compatible with another WRITE lock or an UPGRADE lock. Usage: |
| [TryAcquireReadLock(TimeSpan, CancellationToken)](PostgresDistributedReaderWriterLock.TryAcquireReadLock.uH/chMVDaFHN9df7XbbnXg.md 'Medallion.Threading.Postgres.PostgresDistributedReaderWriterLock.TryAcquireReadLock(System.TimeSpan, System.Threading.CancellationToken)') | Attempts to acquire a READ lock synchronously. Multiple readers are allowed. Not compatible with a WRITE lock. Usage: |
| [TryAcquireReadLockAsync(TimeSpan, CancellationToken)](PostgresDistributedReaderWriterLock.TryAcquireReadLockAsync.e4VL9+L71L28yd6spXQ36Q.md 'Medallion.Threading.Postgres.PostgresDistributedReaderWriterLock.TryAcquireReadLockAsync(System.TimeSpan, System.Threading.CancellationToken)') | Attempts to acquire a READ lock asynchronously. Multiple readers are allowed. Not compatible with a WRITE lock. Usage: |
| [TryAcquireWriteLock(TimeSpan, CancellationToken)](PostgresDistributedReaderWriterLock.TryAcquireWriteLock.apGt13uh3dT6sqhtZGuJ/g.md 'Medallion.Threading.Postgres.PostgresDistributedReaderWriterLock.TryAcquireWriteLock(System.TimeSpan, System.Threading.CancellationToken)') | Attempts to acquire a WRITE lock synchronously. Not compatible with another WRITE lock or an UPGRADE lock. Usage: |
| [TryAcquireWriteLockAsync(TimeSpan, CancellationToken)](PostgresDistributedReaderWriterLock.TryAcquireWriteLockAsync.KuAeRuowsuEAdyQCqKQqGA.md 'Medallion.Threading.Postgres.PostgresDistributedReaderWriterLock.TryAcquireWriteLockAsync(System.TimeSpan, System.Threading.CancellationToken)') | Attempts to acquire a WRITE lock asynchronously. Not compatible with another WRITE lock or an UPGRADE lock. Usage: |
