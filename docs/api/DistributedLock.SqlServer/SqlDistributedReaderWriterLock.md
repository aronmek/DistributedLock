#### [DistributedLock.SqlServer](README.md 'README')
### [Medallion.Threading.SqlServer](Medallion.Threading.SqlServer.md 'Medallion.Threading.SqlServer')

## SqlDistributedReaderWriterLock Class

Implements reader-writer lock semantics using a SQL server application lock  
(see https://msdn.microsoft.com/en-us/library/ms189823.aspx).  
  
This class supports the following patterns:  
* Multiple readers AND single writer (using [AcquireReadLock(Nullable&lt;TimeSpan&gt;, CancellationToken)](SqlDistributedReaderWriterLock.AcquireReadLock.VL35b6pTj/jUeLkzFiukmQ.md 'Medallion.Threading.SqlServer.SqlDistributedReaderWriterLock.AcquireReadLock(System.Nullable<System.TimeSpan>, System.Threading.CancellationToken)') and [AcquireUpgradeableReadLock(Nullable&lt;TimeSpan&gt;, CancellationToken)](SqlDistributedReaderWriterLock.AcquireUpgradeableReadLock.FQQa8Ne3Ve3DCYUMPEnBDg.md 'Medallion.Threading.SqlServer.SqlDistributedReaderWriterLock.AcquireUpgradeableReadLock(System.Nullable<System.TimeSpan>, System.Threading.CancellationToken)'))  
* Multiple readers OR single writer (using [AcquireReadLock(Nullable&lt;TimeSpan&gt;, CancellationToken)](SqlDistributedReaderWriterLock.AcquireReadLock.VL35b6pTj/jUeLkzFiukmQ.md 'Medallion.Threading.SqlServer.SqlDistributedReaderWriterLock.AcquireReadLock(System.Nullable<System.TimeSpan>, System.Threading.CancellationToken)') and [AcquireWriteLock(Nullable&lt;TimeSpan&gt;, CancellationToken)](SqlDistributedReaderWriterLock.AcquireWriteLock.EU9XGhm/TaMbin4RU73eiA.md 'Medallion.Threading.SqlServer.SqlDistributedReaderWriterLock.AcquireWriteLock(System.Nullable<System.TimeSpan>, System.Threading.CancellationToken)'))  
* Upgradeable read locks similar to [System.Threading.ReaderWriterLockSlim.EnterUpgradeableReadLock](https://docs.microsoft.com/en-us/dotnet/api/System.Threading.ReaderWriterLockSlim.EnterUpgradeableReadLock 'System.Threading.ReaderWriterLockSlim.EnterUpgradeableReadLock') (using [AcquireUpgradeableReadLock(Nullable&lt;TimeSpan&gt;, CancellationToken)](SqlDistributedReaderWriterLock.AcquireUpgradeableReadLock.FQQa8Ne3Ve3DCYUMPEnBDg.md 'Medallion.Threading.SqlServer.SqlDistributedReaderWriterLock.AcquireUpgradeableReadLock(System.Nullable<System.TimeSpan>, System.Threading.CancellationToken)') and [UpgradeToWriteLock(Nullable&lt;TimeSpan&gt;, CancellationToken)](https://github.com/madelson/DistributedLock/tree/default-documentation/docs/api/DistributedLock.Core/IDistributedLockUpgradeableHandle.UpgradeToWriteLock.Tz7MsKLra+HymbjqGwuzRQ.md 'Medallion.Threading.IDistributedLockUpgradeableHandle.UpgradeToWriteLock(System.Nullable{System.TimeSpan},System.Threading.CancellationToken)'))

```csharp
public sealed class SqlDistributedReaderWriterLock :
Medallion.Threading.IDistributedUpgradeableReaderWriterLock,
Medallion.Threading.IDistributedReaderWriterLock
```

Inheritance [System.Object](https://docs.microsoft.com/en-us/dotnet/api/System.Object 'System.Object') &#129106; SqlDistributedReaderWriterLock

Implements [IDistributedUpgradeableReaderWriterLock](https://github.com/madelson/DistributedLock/tree/default-documentation/docs/api/DistributedLock.Core/IDistributedUpgradeableReaderWriterLock.md 'Medallion.Threading.IDistributedUpgradeableReaderWriterLock'), [IDistributedReaderWriterLock](https://github.com/madelson/DistributedLock/tree/default-documentation/docs/api/DistributedLock.Core/IDistributedReaderWriterLock.md 'Medallion.Threading.IDistributedReaderWriterLock')

| Constructors | |
| :--- | :--- |
| [SqlDistributedReaderWriterLock(string, string, Action&lt;SqlConnectionOptionsBuilder&gt;, bool)](SqlDistributedReaderWriterLock..ctor.t7dQ4a6u8pWRU7S46Bev2w.md 'Medallion.Threading.SqlServer.SqlDistributedReaderWriterLock.SqlDistributedReaderWriterLock(string, string, System.Action<Medallion.Threading.SqlServer.SqlConnectionOptionsBuilder>, bool)') | Constructs a new lock using the provided [name](SqlDistributedReaderWriterLock..ctor.t7dQ4a6u8pWRU7S46Bev2w.md#Medallion.Threading.SqlServer.SqlDistributedReaderWriterLock.SqlDistributedReaderWriterLock(string,string,System.Action_Medallion.Threading.SqlServer.SqlConnectionOptionsBuilder_,bool).name 'Medallion.Threading.SqlServer.SqlDistributedReaderWriterLock.SqlDistributedReaderWriterLock(string, string, System.Action<Medallion.Threading.SqlServer.SqlConnectionOptionsBuilder>, bool).name'). <br/><br/>The provided [connectionString](SqlDistributedReaderWriterLock..ctor.t7dQ4a6u8pWRU7S46Bev2w.md#Medallion.Threading.SqlServer.SqlDistributedReaderWriterLock.SqlDistributedReaderWriterLock(string,string,System.Action_Medallion.Threading.SqlServer.SqlConnectionOptionsBuilder_,bool).connectionString 'Medallion.Threading.SqlServer.SqlDistributedReaderWriterLock.SqlDistributedReaderWriterLock(string, string, System.Action<Medallion.Threading.SqlServer.SqlConnectionOptionsBuilder>, bool).connectionString') will be used to connect to the database.<br/><br/>Unless [exactName](SqlDistributedReaderWriterLock..ctor.t7dQ4a6u8pWRU7S46Bev2w.md#Medallion.Threading.SqlServer.SqlDistributedReaderWriterLock.SqlDistributedReaderWriterLock(string,string,System.Action_Medallion.Threading.SqlServer.SqlConnectionOptionsBuilder_,bool).exactName 'Medallion.Threading.SqlServer.SqlDistributedReaderWriterLock.SqlDistributedReaderWriterLock(string, string, System.Action<Medallion.Threading.SqlServer.SqlConnectionOptionsBuilder>, bool).exactName') is specified, [name](SqlDistributedReaderWriterLock..ctor.t7dQ4a6u8pWRU7S46Bev2w.md#Medallion.Threading.SqlServer.SqlDistributedReaderWriterLock.SqlDistributedReaderWriterLock(string,string,System.Action_Medallion.Threading.SqlServer.SqlConnectionOptionsBuilder_,bool).name 'Medallion.Threading.SqlServer.SqlDistributedReaderWriterLock.SqlDistributedReaderWriterLock(string, string, System.Action<Medallion.Threading.SqlServer.SqlConnectionOptionsBuilder>, bool).name') will be escaped/hashed to ensure name validity. |
| [SqlDistributedReaderWriterLock(string, IDbConnection, bool)](SqlDistributedReaderWriterLock..ctor.aQ4wmiPxon1R/D2jE25+dg.md 'Medallion.Threading.SqlServer.SqlDistributedReaderWriterLock.SqlDistributedReaderWriterLock(string, System.Data.IDbConnection, bool)') | Constructs a new lock using the provided [name](SqlDistributedReaderWriterLock..ctor.aQ4wmiPxon1R/D2jE25+dg.md#Medallion.Threading.SqlServer.SqlDistributedReaderWriterLock.SqlDistributedReaderWriterLock(string,System.Data.IDbConnection,bool).name 'Medallion.Threading.SqlServer.SqlDistributedReaderWriterLock.SqlDistributedReaderWriterLock(string, System.Data.IDbConnection, bool).name').<br/><br/>The provided [connection](SqlDistributedReaderWriterLock..ctor.aQ4wmiPxon1R/D2jE25+dg.md#Medallion.Threading.SqlServer.SqlDistributedReaderWriterLock.SqlDistributedReaderWriterLock(string,System.Data.IDbConnection,bool).connection 'Medallion.Threading.SqlServer.SqlDistributedReaderWriterLock.SqlDistributedReaderWriterLock(string, System.Data.IDbConnection, bool).connection') will be used to connect to the database and will provide lock scope. It is assumed to be externally managed and<br/>will not be opened or closed.<br/><br/>Unless [exactName](SqlDistributedReaderWriterLock..ctor.aQ4wmiPxon1R/D2jE25+dg.md#Medallion.Threading.SqlServer.SqlDistributedReaderWriterLock.SqlDistributedReaderWriterLock(string,System.Data.IDbConnection,bool).exactName 'Medallion.Threading.SqlServer.SqlDistributedReaderWriterLock.SqlDistributedReaderWriterLock(string, System.Data.IDbConnection, bool).exactName') is specified, [name](SqlDistributedReaderWriterLock..ctor.aQ4wmiPxon1R/D2jE25+dg.md#Medallion.Threading.SqlServer.SqlDistributedReaderWriterLock.SqlDistributedReaderWriterLock(string,System.Data.IDbConnection,bool).name 'Medallion.Threading.SqlServer.SqlDistributedReaderWriterLock.SqlDistributedReaderWriterLock(string, System.Data.IDbConnection, bool).name') will be escaped/hashed to ensure name validity. |
| [SqlDistributedReaderWriterLock(string, IDbTransaction, bool)](SqlDistributedReaderWriterLock..ctor.V/fj2Yk0d/CnC3hDs1y3Cg.md 'Medallion.Threading.SqlServer.SqlDistributedReaderWriterLock.SqlDistributedReaderWriterLock(string, System.Data.IDbTransaction, bool)') | Constructs a new lock using the provided [name](SqlDistributedReaderWriterLock..ctor.V/fj2Yk0d/CnC3hDs1y3Cg.md#Medallion.Threading.SqlServer.SqlDistributedReaderWriterLock.SqlDistributedReaderWriterLock(string,System.Data.IDbTransaction,bool).name 'Medallion.Threading.SqlServer.SqlDistributedReaderWriterLock.SqlDistributedReaderWriterLock(string, System.Data.IDbTransaction, bool).name').<br/><br/>The provided [transaction](SqlDistributedReaderWriterLock..ctor.V/fj2Yk0d/CnC3hDs1y3Cg.md#Medallion.Threading.SqlServer.SqlDistributedReaderWriterLock.SqlDistributedReaderWriterLock(string,System.Data.IDbTransaction,bool).transaction 'Medallion.Threading.SqlServer.SqlDistributedReaderWriterLock.SqlDistributedReaderWriterLock(string, System.Data.IDbTransaction, bool).transaction') will be used to connect to the database and will provide lock scope. It is assumed to be externally managed and<br/>will not be committed or rolled back.<br/><br/>Unless [exactName](SqlDistributedReaderWriterLock..ctor.V/fj2Yk0d/CnC3hDs1y3Cg.md#Medallion.Threading.SqlServer.SqlDistributedReaderWriterLock.SqlDistributedReaderWriterLock(string,System.Data.IDbTransaction,bool).exactName 'Medallion.Threading.SqlServer.SqlDistributedReaderWriterLock.SqlDistributedReaderWriterLock(string, System.Data.IDbTransaction, bool).exactName') is specified, [name](SqlDistributedReaderWriterLock..ctor.V/fj2Yk0d/CnC3hDs1y3Cg.md#Medallion.Threading.SqlServer.SqlDistributedReaderWriterLock.SqlDistributedReaderWriterLock(string,System.Data.IDbTransaction,bool).name 'Medallion.Threading.SqlServer.SqlDistributedReaderWriterLock.SqlDistributedReaderWriterLock(string, System.Data.IDbTransaction, bool).name') will be escaped/hashed to ensure name validity. |

| Properties | |
| :--- | :--- |
| [Name](SqlDistributedReaderWriterLock.Name.md 'Medallion.Threading.SqlServer.SqlDistributedReaderWriterLock.Name') | Implements [Name](https://github.com/madelson/DistributedLock/tree/default-documentation/docs/api/DistributedLock.Core/IDistributedLock.Name.md 'Medallion.Threading.IDistributedLock.Name') |

| Methods | |
| :--- | :--- |
| [AcquireReadLock(Nullable&lt;TimeSpan&gt;, CancellationToken)](SqlDistributedReaderWriterLock.AcquireReadLock.VL35b6pTj/jUeLkzFiukmQ.md 'Medallion.Threading.SqlServer.SqlDistributedReaderWriterLock.AcquireReadLock(System.Nullable<System.TimeSpan>, System.Threading.CancellationToken)') | Acquires a READ lock synchronously, failing with [System.TimeoutException](https://docs.microsoft.com/en-us/dotnet/api/System.TimeoutException 'System.TimeoutException') if the attempt times out. Multiple readers are allowed. Not compatible with a WRITE lock. Usage: |
| [AcquireReadLockAsync(Nullable&lt;TimeSpan&gt;, CancellationToken)](SqlDistributedReaderWriterLock.AcquireReadLockAsync.frJQMqQ08BVx5q1tgkQxjQ.md 'Medallion.Threading.SqlServer.SqlDistributedReaderWriterLock.AcquireReadLockAsync(System.Nullable<System.TimeSpan>, System.Threading.CancellationToken)') | Acquires a READ lock asynchronously, failing with [System.TimeoutException](https://docs.microsoft.com/en-us/dotnet/api/System.TimeoutException 'System.TimeoutException') if the attempt times out. Multiple readers are allowed. Not compatible with a WRITE lock. Usage: |
| [AcquireUpgradeableReadLock(Nullable&lt;TimeSpan&gt;, CancellationToken)](SqlDistributedReaderWriterLock.AcquireUpgradeableReadLock.FQQa8Ne3Ve3DCYUMPEnBDg.md 'Medallion.Threading.SqlServer.SqlDistributedReaderWriterLock.AcquireUpgradeableReadLock(System.Nullable<System.TimeSpan>, System.Threading.CancellationToken)') | Acquires an UPGRADE lock synchronously, failing with [System.TimeoutException](https://docs.microsoft.com/en-us/dotnet/api/System.TimeoutException 'System.TimeoutException') if the attempt times out. Not compatible with another UPGRADE lock or a WRITE lock. Usage: |
| [AcquireUpgradeableReadLockAsync(Nullable&lt;TimeSpan&gt;, CancellationToken)](SqlDistributedReaderWriterLock.AcquireUpgradeableReadLockAsync.m/YUdo7XWAgnG1T4s0f5Vw.md 'Medallion.Threading.SqlServer.SqlDistributedReaderWriterLock.AcquireUpgradeableReadLockAsync(System.Nullable<System.TimeSpan>, System.Threading.CancellationToken)') | Acquires an UPGRADE lock asynchronously, failing with [System.TimeoutException](https://docs.microsoft.com/en-us/dotnet/api/System.TimeoutException 'System.TimeoutException') if the attempt times out. Not compatible with another UPGRADE lock or a WRITE lock. Usage: |
| [AcquireWriteLock(Nullable&lt;TimeSpan&gt;, CancellationToken)](SqlDistributedReaderWriterLock.AcquireWriteLock.EU9XGhm/TaMbin4RU73eiA.md 'Medallion.Threading.SqlServer.SqlDistributedReaderWriterLock.AcquireWriteLock(System.Nullable<System.TimeSpan>, System.Threading.CancellationToken)') | Acquires a WRITE lock synchronously, failing with [System.TimeoutException](https://docs.microsoft.com/en-us/dotnet/api/System.TimeoutException 'System.TimeoutException') if the attempt times out. Not compatible with another WRITE lock or an UPGRADE lock. Usage: |
| [AcquireWriteLockAsync(Nullable&lt;TimeSpan&gt;, CancellationToken)](SqlDistributedReaderWriterLock.AcquireWriteLockAsync.am3WXoiXExWu7PDcFrcbHg.md 'Medallion.Threading.SqlServer.SqlDistributedReaderWriterLock.AcquireWriteLockAsync(System.Nullable<System.TimeSpan>, System.Threading.CancellationToken)') | Acquires a WRITE lock asynchronously, failing with [System.TimeoutException](https://docs.microsoft.com/en-us/dotnet/api/System.TimeoutException 'System.TimeoutException') if the attempt times out. Not compatible with another WRITE lock or an UPGRADE lock. Usage: |
| [TryAcquireReadLock(TimeSpan, CancellationToken)](SqlDistributedReaderWriterLock.TryAcquireReadLock.UqHJCSMD9c66tSl6eX0L5w.md 'Medallion.Threading.SqlServer.SqlDistributedReaderWriterLock.TryAcquireReadLock(System.TimeSpan, System.Threading.CancellationToken)') | Attempts to acquire a READ lock synchronously. Multiple readers are allowed. Not compatible with a WRITE lock. Usage: |
| [TryAcquireReadLockAsync(TimeSpan, CancellationToken)](SqlDistributedReaderWriterLock.TryAcquireReadLockAsync.sG3MIB9MAtPJdHFbnV2eSw.md 'Medallion.Threading.SqlServer.SqlDistributedReaderWriterLock.TryAcquireReadLockAsync(System.TimeSpan, System.Threading.CancellationToken)') | Attempts to acquire a READ lock asynchronously. Multiple readers are allowed. Not compatible with a WRITE lock. Usage: |
| [TryAcquireUpgradeableReadLock(TimeSpan, CancellationToken)](SqlDistributedReaderWriterLock.TryAcquireUpgradeableReadLock.+0DGM6PoyEWIi1vW2vuGTg.md 'Medallion.Threading.SqlServer.SqlDistributedReaderWriterLock.TryAcquireUpgradeableReadLock(System.TimeSpan, System.Threading.CancellationToken)') | Attempts to acquire an UPGRADE lock synchronously. Not compatible with another UPGRADE lock or a WRITE lock. Usage: |
| [TryAcquireUpgradeableReadLockAsync(TimeSpan, CancellationToken)](SqlDistributedReaderWriterLock.TryAcquireUpgradeableReadLockAsync.cFH9Wic6iC3c0NhaQB0+3A.md 'Medallion.Threading.SqlServer.SqlDistributedReaderWriterLock.TryAcquireUpgradeableReadLockAsync(System.TimeSpan, System.Threading.CancellationToken)') | Attempts to acquire an UPGRADE lock asynchronously. Not compatible with another UPGRADE lock or a WRITE lock. Usage: |
| [TryAcquireWriteLock(TimeSpan, CancellationToken)](SqlDistributedReaderWriterLock.TryAcquireWriteLock.ZWd9ONo8vWJyVmWMPBHRtg.md 'Medallion.Threading.SqlServer.SqlDistributedReaderWriterLock.TryAcquireWriteLock(System.TimeSpan, System.Threading.CancellationToken)') | Attempts to acquire a WRITE lock synchronously. Not compatible with another WRITE lock or an UPGRADE lock. Usage: |
| [TryAcquireWriteLockAsync(TimeSpan, CancellationToken)](SqlDistributedReaderWriterLock.TryAcquireWriteLockAsync.PXBAXD3VfrmbmNfR4TNxfg.md 'Medallion.Threading.SqlServer.SqlDistributedReaderWriterLock.TryAcquireWriteLockAsync(System.TimeSpan, System.Threading.CancellationToken)') | Attempts to acquire a WRITE lock asynchronously. Not compatible with another WRITE lock or an UPGRADE lock. Usage: |
